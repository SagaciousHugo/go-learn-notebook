# 2.2 变量

## 2.2.1 声明变量

* 标准格式 

```
var 变量名 变量类型
var 变量名1, 变量名2 变量类型

var a int
var a, b int
```

* 批量格式

```
var (
  变量名1 变量类型1
  变量名2 变量类型2
)

var (
  a int
  b string
)
```

变量声明后，不进行初始化则默认为对应类型的零值

* 整型、浮点型默认为0
* 字符串默认为空字符串
* 布尔型默认为false
* slice，map，函数，接口，指针变量默认为nil
* struct默认为其field均为零值的一个struct实例
* 数组默认为其Item均为零值的一个数组实例

## 2.2.2 初始化变量

* 标准格式

```
var 变量名 类型 = 表达式
var 变量名1, 变量名2 类型 = 表达式1, 表达式2

var a int64 = 1
var a, b int64 = 2, 3
```

* 编译器推导类型格式

```
var 变量 = 表达式
var 变量1, 变量2 = 表达式1, 表达式2

var a = 1 // int
var a, b = 1, "233" // int string
```

* 特殊格式（短变量声明）

```
变量名 := 表达式
变量名1, 变量名2 := 表达式1, 表达式2

a := 1
a, b := 1, 2

// 注意1 := 是声明且赋值，对于单个变量，若该变量之前已经声明过，但是依然使用:=，则编译报错

var a = 1

a := 2 // X 编译报错 No new variables on left side of :=

// 注意2 对于多个变量，若:=左侧至少存在一个未声明的变量，那么即使:=左侧其他变量已经声明过了，也不会报错

var conn net.Conn

conn, err := net.Dial("tcp", "127.0.0.1:8080")

// 注意3 变量作用域，下面写法会导致在代码块中新创建了一个变量a，（1）和（2）处打印出的地址不一致
// 所以注意2中写法需保证在同一个代码块中，当然最好还是把变量都提前声明好了
var a = 100
fmt.Println(&a) // (1)
if a, b := 3, 4; b == 4 {
    fmt.Println(&a) // (2)
}
```

## 2.2.3 多变量赋值

如2.2.2中所示例的，Go语言支持多变量同时赋值

所以在go语言中2个变量交换只需写一行

```
var a, b = 1, 2
a, b = b, a
```

## 2.2.4 匿名变量

赋值运算符左侧可以是一个特殊的匿名变量，即一个“\_”下划线，当不需要赋值运算符左侧变量时，可以使用匿名变量（即不用专门声明一个额外的变量去接收不需要的赋值）

```
func swap(a, b int)(int, int){
    return b, a
}
var a, b = 4, 5

a, _ = swap(a, b)
_, b = swap(a, b)


// 对于2.2.2 初始化变量-特殊格式-注意2进行补充， 匿名变量是一个特殊变量，无需声明，不算未声明变量
// 以下写法编译报错
var conn net.Conn

conn, _ := net.Dial("tcp", "127.0.0.1:8080") // X 编译错误 No new variables on left side of :=
```



